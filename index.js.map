{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\n\nexport const createGalleryCardTemplate = imgInfo => {\n    return `\n      <li class=\"gallery-card\">\n        <a class=\"gallery-link\"  href=\"${imgInfo.largeImageURL}\">\n          <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" /> \n          <ul class=\"text-info\">\n\n            <li class=\"image-info\">\n              <h4>Likes</h4>\n              <p>${imgInfo.likes}</p>\n            </li>\n\n            <li class=\"image-info\">\n              <h4>Views</h4>\n              <p>${imgInfo.views}</p>\n            </li>\n\n            <li class=\"image-info\">\n              <h4>Comments</h4>\n              <p>${imgInfo.comments}</p>\n            </li>\n            \n            <li class=\"image-info\">\n              <h4>Downloads</h4>\n              <p>${imgInfo.downloads}</p>\n          </ul>\n          </a>\n      </li>\n    `;\n  };","import axios from 'axios';\n\n\nexport const fetchPhotosByQuery = (searchedEl, currentPage) => {\n  const searchParams = new URLSearchParams({\n    q: searchedEl,\n    key: '48586897-e2ee4ea242ed1cc66f698b76b',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 25,\n  });\n\n  return axios.get(`https://pixabay.com/api/?${searchParams}`, searchParams);\n};\n","import { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotosByQuery } from './js/pixabay-api.js';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet imgBox = '';\nconst loader = document.querySelector('.loader');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nlet page = 1;\nlet searchedEl = '';\nlet perPage = 25;\n\nloadMoreBtn.classList.add('is-hidden');\n\nconst searchSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchedEl = searchForm.elements[0].value.trim();\n\n    if (searchedEl === '') {\n      iziToast.error({\n        title: '',\n        message: 'Please enter your request',\n        position: 'topRight',\n      });\n\n      return;\n    }\n\n    page = 1;\n\n    loadMoreBtn.classList.add('is-hidden');\n    loader.classList.add('show-loader');\n\n    const { data } = await fetchPhotosByQuery(searchedEl, page);\n\n    if (data.total === 0) {\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      gallery.innerHTML = '';\n\n      searchForm.reset();\n\n      return;\n    }\n\n    if (data.totalHits > 1) {\n      loadMoreBtn.classList.remove('is-hidden');\n\n      loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    gallery.innerHTML = galleryTemplate;\n    lightbox.refresh();\n  } catch (err) {\n    console.log(err);\n  } finally {\n    loader.classList.remove('show-loader');\n  }\n};\n\nsearchForm.addEventListener('submit', searchSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    const endMessage = document.querySelector('.endResults');\n    loader.classList.add('show-loader');\n\n    page += 1;\n\n    const { data } = await fetchPhotosByQuery(searchedEl, page);\n\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', galleryTemplate);\n    loader.classList.remove('show-loader');\n\n    imgBox = document.querySelector('.gallery-card').getBoundingClientRect();\n    let imgHeight = imgBox.height;\n\n    window.scrollBy({\n      top: imgHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (page * perPage >= data.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.show({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        color: 'red',\n      });\n\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["createGalleryCardTemplate","imgInfo","fetchPhotosByQuery","searchedEl","currentPage","searchParams","axios","searchForm","gallery","loadMoreBtn","imgBox","loader","lightbox","SimpleLightbox","page","perPage","searchSubmit","event","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","err","endMessage","imgHeight"],"mappings":"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"}